name: Caller workflow
on:
  workflow_dispatch:
    inputs:
      environment:
        description: "environment"
        type: environment
        required: true
jobs:
  init:
    runs-on: ubuntu-latest
    name: "my test"
    steps:
     - name: Set up environment variables
       run: |
          env_data_json=${{ vars.SIZE_VAR }}
          
          # Use a simple Bash script to extract the relevant data based on the current environment
          current_environment="${{ github.event.inputs.environment }}"
          relevant_data=$(echo "$env_data_json" | jq -r ".[\"$current_environment\"]")

          # Export the relevant data as an environment variable
          echo "export RELEVANT_DATA='$relevant_data'" >> $GITHUB_ENV
          
     - name: Print relevant data
       run: |
          # Access the exported environment variable containing the relevant data
          echo "Current environment: ${{ github.event.inputs.environment }}"
          echo "Relevant data for the current environment: $RELEVANT_DATA"
